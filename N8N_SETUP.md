# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è n8n –ê–≥–µ–Ω—Ç–∞ –¥–ª—è Kaizen Questions Bot

## üìã –û–≥–ª—è–¥

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î —è–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ n8n –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Kaizen Questions Bot. –ê–≥–µ–Ω—Ç –º–æ–∂–µ:
- –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è
- –ê–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–∏—Ç–∞–Ω–Ω—è
- –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –Ü–º–ø–æ—Ä—Ç workflow
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ n8n (–∑–∞–∑–≤–∏—á–∞–π http://localhost:5678)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Workflows**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Import from file**
4. –í–∏–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª `n8n_agent_workflow.json`
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Import**

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è OpenAI
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ workflow "Kaizen Questions Bot Agent"
2. –î–ª—è –∫–æ–∂–Ω–æ—ó AI –Ω–æ–¥–∏ (Generate Questions, Analyze Answer, Follow-up Questions):
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –Ω–æ–¥—É
   - –£ —Ä–æ–∑–¥—ñ–ª—ñ **Credentials** –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Add Credential**
   - –í–∏–±–µ—Ä—ñ—Ç—å **OpenAI API**
   - –í–≤–µ–¥—ñ—Ç—å –≤–∞—à OpenAI API –∫–ª—é—á
   - –ó–±–µ—Ä–µ–∂—ñ—Ç—å credential

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è webhook URL
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–æ–¥—É **Webhook Trigger**
2. –°–∫–æ–ø—ñ—é–π—Ç–µ URL webhook (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `http://localhost:5678/webhook/kaizen-bot-webhook`)
3. –û–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—É `N8N_WEBHOOK_URL` —É –≤–∞—à–æ–º—É `.env` —Ñ–∞–π–ª—ñ:
   ```env
   N8N_WEBHOOK_URL=http://localhost:5678/webhook/kaizen-bot-webhook
   ```

### 4. –ê–∫—Ç–∏–≤–∞—Ü—ñ—è workflow
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Active** —É –≤–µ—Ä—Ö–Ω—å–æ–º—É –ø—Ä–∞–≤–æ–º—É –∫—É—Ç—ñ
2. Workflow —Ç–µ–ø–µ—Ä –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏!

## üîß –î–µ—Ç–∞–ª—å–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Workflow

```
Webhook Trigger ‚Üí Request Type Switch ‚Üí AI Processing ‚Üí API Calls ‚Üí Response
```

#### 1. Webhook Trigger
- **URL**: `/webhook`
- **–ú–µ—Ç–æ–¥**: POST
- **–ü—Ä–∏–π–º–∞—î**: JSON –∑ –ø–æ–ª—è–º–∏ `type`, `userId`, —Ç–æ—â–æ

#### 2. Request Type Switch
–†–æ–∑–¥—ñ–ª—è—î –∑–∞–ø–∏—Ç–∏ –∑–∞ —Ç–∏–ø–æ–º:
- `generate_questions` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–∏—Ç–∞–Ω—å
- `analyze_answer` - –∞–Ω–∞–ª—ñ–∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- `follow_up_questions` - –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–∏—Ç–∞–Ω–Ω—è

#### 3. AI Nodes
–ö–æ–∂–Ω–∞ AI –Ω–æ–¥–∞ –º–∞—î —Å–≤—ñ–π —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç:

**Generate Questions:**
```
–¢–∏ - AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –∫–∞–π–¥–∑–µ–Ω-–ø–∏—Ç–∞–Ω—å. 
–°—Ç–≤–æ—Ä–∏ 3 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —Ç–∞ –¥—ñ—î–≤—ñ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

–ü—Ä–∞–≤–∏–ª–∞:
1. –ü–∏—Ç–∞–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º–∏ —Ç–∞ –¥—ñ—î–≤–∏–º–∏
2. –í—Ä–∞—Ö–æ–≤—É–π —Ü—ñ–ª—ñ —Ç–∞ —Å—Ñ–µ—Ä–∏ –∂–∏—Ç—Ç—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
3. –ü–∏—Ç–∞–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω—ñ —Å–ø–æ–Ω—É–∫–∞—Ç–∏ –¥–æ —Ä–µ—Ñ–ª–µ–∫—Å—ñ—ó —Ç–∞ –¥—ñ—ó
4. –£–Ω–∏–∫–∞–π –∑–∞–≥–∞–ª—å–Ω–∏—Ö —Ñ—Ä–∞–∑, –±—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º
5. –ü–∏—Ç–∞–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é

–ü–æ–≤–µ—Ä–Ω–∏ —Ç—ñ–ª—å–∫–∏ JSON –º–∞—Å–∏–≤ –∑ –ø–∏—Ç–∞–Ω–Ω—è–º–∏
```

**Analyze Answer:**
```
–¢–∏ - AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. 
–ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Ç–∞ –Ω–∞–¥–∞–π –∫–æ—Ä–∏—Å–Ω—ñ —ñ–Ω—Å–∞–π—Ç–∏ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó.

–ü–æ–≤–µ—Ä–Ω–∏ JSON –æ–±'—î–∫—Ç –∑ –ø–æ–ª—è–º–∏:
- insights: –º–∞—Å–∏–≤ —ñ–Ω—Å–∞–π—Ç—ñ–≤ –ø—Ä–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
- suggestions: –º–∞—Å–∏–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
- follow_up_questions: –º–∞—Å–∏–≤ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø–∏—Ç–∞–Ω—å
```

#### 4. API Nodes
–ö–æ–∂–Ω–∞ AI –Ω–æ–¥–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞ –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ API –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É:

- **API: Generate Questions** ‚Üí `POST /api/questions/generate`
- **API: Analyze Answer** ‚Üí `POST /api/answers/analyze`
- **API: Merge Context** ‚Üí `POST /api/context/merge`

## üì§ –§–æ—Ä–º–∞—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤



### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–∏—Ç–∞–Ω—å
```json
{
  "type": "generate_questions",
  "userId": 123
}
```

### –ê–Ω–∞–ª—ñ–∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
```json
{
  "type": "analyze_answer",
  "userId": 123,
  "answerId": 456,
  "questionText": "–©–æ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —Å—å–æ–≥–æ–¥–Ω—ñ?",
  "answerText": "–Ø –º–æ–∂—É –∫—Ä–∞—â–µ –ø–ª–∞–Ω—É–≤–∞—Ç–∏ —Å–≤—ñ–π –¥–µ–Ω—å"
}
```

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–∏—Ç–∞–Ω–Ω—è
```json
{
  "type": "follow_up_questions",
  "userId": 123,
  "lastAnswer": "–Ø –º–æ–∂—É –∫—Ä–∞—â–µ –ø–ª–∞–Ω—É–≤–∞—Ç–∏ —Å–≤—ñ–π –¥–µ–Ω—å",
  "aboutMe": "–Ø —Ä–æ–∑—Ä–æ–±–Ω–∏–∫",
  "goals": "–ü–æ–∫—Ä–∞—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å",
  "areas": "—Ä–æ–±–æ—Ç–∞, –æ—Å–æ–±–∏—Å—Ç—ñ—Å–Ω–∏–π —Ä–æ–∑–≤–∏—Ç–æ–∫"
}
```

## üì• –§–æ—Ä–º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### –£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
```json
{
  "success": true,
  "data": {
    "questions": [
      "–Ø–∫ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —Å–≤–æ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Å—å–æ–≥–æ–¥–Ω—ñ?",
      "–©–æ –≤–∞—Å –Ω–∞–π–±—ñ–ª—å—à–µ –º–æ—Ç–∏–≤—É—î –≤ —Ä–æ–±–æ—Ç—ñ?",
      "–Ø–∫—ñ –ø–µ—Ä–µ—à–∫–æ–¥–∏ –≤–∏ –±–∞—á–∏—Ç–µ –Ω–∞ —à–ª—è—Ö—É –¥–æ —Å–≤–æ—ó—Ö —Ü—ñ–ª–µ–π?"
    ]
  }
}
```

### –ü–æ–º–∏–ª–∫–∞
```json
{
  "success": false,
  "error": "User not found"
}
```

## üîç –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –¢–µ—Å—Ç webhook
```bash
curl -X POST http://localhost:5678/webhook/kaizen-bot-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "type": "generate_questions",
    "userId": 123
  }'
```

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ workflow –≤ n8n
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Execute Workflow**
3. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ –∫–æ–∂–Ω–æ—ó –Ω–æ–¥–∏

### 3. –¢–µ—Å—Ç –∑ –±–æ—Ç–æ–º
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å Kaizen Questions Bot
2. –ù–∞–¥—ñ—à–ª—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–æ—Ç—É
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ n8n —Ç–∞ –±–æ—Ç—ñ

## üõ†Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –¥–ª—è n8n
```env
# OpenAI
OPENAI_API_KEY=your_openai_api_key_here

# Kaizen Bot API
KAIZEN_BOT_API_URL=http://localhost:3000/api

# Webhook
WEBHOOK_URL=http://localhost:5678/webhook/kaizen-bot-webhook
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ n8n
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Settings** ‚Üí **Variables**
2. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ:
   - `KAIZEN_BOT_API_URL`: `http://localhost:3000/api`
   - `WEBHOOK_URL`: `http://localhost:5678/webhook/kaizen-bot-webhook`

## üîß –ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–æ–º–ø—Ç—ñ–≤

### –ó–º—ñ–Ω–∞ –ª–æ–≥—ñ–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω—å
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–æ–¥—É **Generate Questions**
2. –ú–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç
3. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤—ñ –ø—Ä–∞–≤–∏–ª–∞ –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å —ñ—Å–Ω—É—é—á—ñ

## üö® –£—Å—É–Ω–µ–Ω–Ω—è –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü–æ–º–∏–ª–∫–∞ "Webhook not found"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π workflow
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ URL webhook –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –±–æ—Ç–∞

### –ü–æ–º–∏–ª–∫–∞ "OpenAI API key not configured"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ credentials –≤ AI –Ω–æ–¥–∞—Ö
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ API –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π

### –ü–æ–º–∏–ª–∫–∞ "User not found"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —ñ—Å–Ω—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ –≤–∫–∞–∑–∞–Ω–∏–º `userId`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### –ü–æ–º–∏–ª–∫–∞ "API endpoint not found"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π Kaizen Bot
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ URL API –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö n8n

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ n8n
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ workflow
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Executions**
3. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –∫–æ–∂–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ –∑–∞ –¥–µ–Ω—å
- –ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ AI
- –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–∏—Ç–∞–Ω—å
- –ü–æ–º–∏–ª–∫–∏ API

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤
1. –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –ø–æ—Ç–æ—á–Ω–∏–π workflow
2. –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç–∏ –≤ JSON
3. –Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ –æ–Ω–æ–≤–ª–µ–Ω–∏–π workflow

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—ñ AI –Ω–æ–¥–∏
2. –î–æ–¥–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ API –Ω–æ–¥–∏
3. –û–Ω–æ–≤—ñ—Ç—å **Request Type Switch** –¥–ª—è –Ω–æ–≤–∏—Ö —Ç–∏–ø—ñ–≤
4. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ n8n —Ç–∞ –±–æ—Ç–∞
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ API
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è credentials
4. –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó API

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞**: –¶–µ–π workflow –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Kaizen Questions Bot v2.0+ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é AI —Å–µ—Ä–≤—ñ—Å—ñ–≤ —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–∏—Ö API –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤. –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–µ–ø–µ—Ä –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ n8n –∞–≥–µ–Ω—Ç–∞.
